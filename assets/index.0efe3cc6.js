import{$ as w,S as k,F as g,a as T,C as N,V as H,t as G,T as V,O as Y,b as j,c as D,I as v,d as y,M as K,e as W,f as $,g as Q,h as U,i as I,D as X,P as F,L as B,u as J,j as S,k as Z,l as ee}from"./vendor.df98d922.js";const te=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const d of e.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerpolicy&&(e.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?e.credentials="include":o.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(o){if(o.ep)return;o.ep=!0;const e=t(o);fetch(o.href,e)}};te();window.$=w;window.jQuery=w;var p=0,ne=new k({fill:new g({color:"rgba(255, 255, 255, 0.2)"}),stroke:new T({color:"#C800FF",width:2}),image:new N({radius:7,fill:new g({color:"#C800FF"})})}),C=new H({center:G([13.199195,55.70331],"EPSG:4326","EPSG:3857"),zoom:13});class re extends I{constructor(r){const t=r||{},a=document.createElement("button");a.innerHTML="M";var o=t.buttonTipLabel?t.buttonTipLabel:"Open Measuring Tool";a.title=o;const e=document.createElement("div");e.className="measure ol-unselectable ol-control",e.appendChild(a);super({element:e,target:t.target});a.addEventListener("click",this.enableMeasuring.bind(this),!1)}enableMeasuring(){p==0?(alert("Measuring Tool Enabled"),p=1,l.on("pointermove",x),fe(),l.getViewport().addEventListener("mouseout",z)):(alert("measuring tool disabled"),p=0,l.un("pointermove",x),l.removeInteraction(m),l.getViewport().removeEventListener("mouseout",z),l.removeOverlay(h))}}class oe extends I{constructor(r){const t=r||{},a=document.createElement("button");a.innerHTML="C";var o=t.buttonTipLabel?t.buttonTipLabel:"Clear Map";a.title=o;const e=document.createElement("div");e.className="clear ol-unselectable ol-control",e.appendChild(a);super({element:e,target:t.target});a.addEventListener("click",this.clearAll.bind(this),!1)}clearAll(){location.reload()}}class ae extends I{constructor(r){const t=r||{},a=document.createElement("button");a.innerHTML="i";var o=t.buttonTipLabel?t.buttonTipLabel:"More Information";a.title=o;const e=document.createElement("div");e.className="more ol-unselectable ol-control",e.appendChild(a);super({element:e,target:t.target});a.addEventListener("click",this.showMore.bind(this),!1)}showMore(){document.getElementById("moreinfo").style.display="block"}}function z(){s.classList.add("hidden")}const le=new V({source:new Y}),O=new j,ie=new D({source:O,style:ne});var A={},b=1;A["v"+b]=ie;let f,s,h,c,L;const se="Click to continue drawing the polygon",ce="Click to continue drawing the line",x=function(n){if(n.dragging)return;let r="Click to start drawing";if(f){const t=f.getGeometry();t instanceof F?r=se:t instanceof B&&(r=ce)}s.innerHTML=r,h.setPosition(n.coordinate),s.classList.remove("hidden")};var R=new v({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data",TILED:!0},serverType:"geoserver"}),ue=new y({source:R}),u={},i=1;u["salvazin"+i]=ue;var P={},E=1;function M(n="none"){var r=new v({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data",TILED:!0,FILTER:"(<Filter><And><PropertyIsEqualTo><PropertyName>name</PropertyName><Literal>"+n+"</Literal></PropertyIsEqualTo></And></Filter>)",STYLES:"salvazin_selection"},serverType:"geoserver"}),t=new y({source:r});l.removeLayer(P["selection"+E]),E+=1,P["selection"+E]=t,l.addLayer(P["selection"+E])}const l=new K({controls:W().extend([new $({units:"metric",bar:!0,steps:4,text:!1,minWidth:140}),new Q({coordinateFormat:U(4),projection:"EPSG:4326",target:document.getElementById("mouse-position")}),new re,new oe,new ae]),layers:[le,A["v"+b],u["salvazin"+i]],target:"map",view:C});M();const _=document.getElementById("type");let m;const de=function(n){const r=Z(n);let t;return r>100?t=Math.round(r/1e3*100)/100+" km":t=Math.round(r*100)/100+" m",t},me=function(n){const r=ee(n);let t;return r>1e4?t=Math.round(r/1e6*100)/100+" km<sup>2</sup>":t=Math.round(r*100)/100+" m<sup>2</sup>",t};function fe(){const n=_.value=="area"?"Polygon":"LineString";m=new X({source:O,type:n,style:new k({fill:new g({color:"rgba(255, 255, 255, 0.2)"}),stroke:new T({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new N({radius:5,stroke:new T({color:"rgba(0, 0, 0, 0.7)"}),fill:new g({color:"rgba(255, 255, 255, 0.2)"})})})}),l.addInteraction(m),q(),ge();let r;m.on("drawstart",function(t){f=t.feature;let a=t.coordinate;r=f.getGeometry().on("change",function(o){const e=o.target;let d;e instanceof F?(d=me(e),a=e.getInteriorPoint().getCoordinates()):e instanceof B&&(d=de(e),a=e.getLastCoordinate()),c.innerHTML=d,L.setPosition(a)})}),m.on("drawend",function(){c.className="ol-tooltip ol-tooltip-static",L.setOffset([0,-7]),f=null,c=null,q(),J(r)})}function ge(){s&&s.parentNode.removeChild(s),s=document.createElement("div"),s.className="ol-tooltip hidden",h=new S({element:s,offset:[15,0],positioning:"center-left"}),l.addOverlay(h)}function q(){c&&c.parentNode.removeChild(c),c=document.createElement("div"),c.className="ol-tooltip ol-tooltip-measure v"+b,L=new S({element:c,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),l.addOverlay(L)}function ve(){l.removeInteraction(m)}l.on("singleclick",function(n){if(p==0){var r=C.getResolution(),t=R.getFeatureInfoUrl(n.coordinate,r,"EPSG:3857",{INFO_FORMAT:"application/json"});w.get(t,function(a){var o=a.features;if(o.length>0){var e=o[0].properties;ye(e)}})}});function ye(n){var r=document.getElementById("infoContent"),t="",a="",o="";for(var e in n)!n.hasOwnProperty(e)||(e=="name"&&(M(n[e]),t+="<h1>"+n[e]+"</h1>"),e=="type"&&(t+="<span>"+n[e]+", <b>SEK "+o+"</b></span><p><img src='img/"+n[e]+".png' width='216'></p><p><i>"),e=="rent"&&(o=Math.round(n[e])),e=="rank"&&(a+=e+": "+n[e].toFixed(4)+"</i></p>"));r.innerHTML=t+a}function pe(){var n=document.getElementById("infoToggle"),r=n.checked,t="";r?t="block":t="none",document.getElementById("info").style.display=t}function he(){var n=document.getElementById("filtersToggle"),r=n.checked,t="";r?t="block":t="none",document.getElementById("filters").style.display=t}function Le(){l.removeLayer(u["salvazin"+i]);var n="";document.filtersForm.rentMax.value!=""&&(n+="<PropertyIsLessThan><PropertyName>rent</PropertyName><Literal>"+document.filtersForm.rentMax.value+"</Literal></PropertyIsLessThan>"),document.filtersForm.rentMin.value!=""&&(n+="<PropertyIsGreaterThan><PropertyName>rent</PropertyName><Literal>"+document.filtersForm.rentMin.value+"</Literal></PropertyIsGreaterThan>"),document.filtersForm.userRank.value!=""&&(n+="<PropertyIsLessThan><PropertyName>rank</PropertyName><Literal>"+document.filtersForm.userRank.value+"</Literal></PropertyIsLessThan>");var r=document.getElementById("trailer").checked,t=document.getElementById("house").checked,a=document.getElementById("apartment").checked;r||(n+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>trailer</Literal></PropertyIsNotEqualTo>"),t||(n+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>house</Literal></PropertyIsNotEqualTo>"),a||(n+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>apartment</Literal></PropertyIsNotEqualTo>");var o=new v({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data",FILTER:"(<Filter><And>"+n+"</And></Filter>)()"},serverType:"geoserver"}),e=new y({source:o});i+=1,u["salvazin"+i]=e,l.addLayer(u["salvazin"+i]),M(document.getElementById("infoContent").innerHTML.split("h1")[1].slice(1).split("<")[0])}function Ee(){document.getElementById("trailer").checked=!0,document.getElementById("house").checked=!0,document.getElementById("apartment").checked=!0,document.filtersForm.rentMax.value="",document.filtersForm.rentMin.value="",document.filtersForm.userRank.value="",l.removeLayer(u["salvazin"+i]);var n=new v({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data"},serverType:"geoserver"}),r=new y({source:n});i+=1,u["salvazin"+i]=r,l.addLayer(u["salvazin"+i])}function we(){document.getElementById("moreinfo").style.display="none"}_.addEventListener("change",ve);document.getElementById("nav").addEventListener("click",we);document.getElementById("infoToggle").addEventListener("click",pe);document.getElementById("filtersToggle").addEventListener("click",he);document.getElementById("clear").addEventListener("click",Ee);document.getElementById("filtersForm").addEventListener("change",Le);
//# sourceMappingURL=index.0efe3cc6.js.map
