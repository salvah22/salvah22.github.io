import{$ as h,S as T,F as g,a as L,C as I,V as R,t as P,T as q,O as H,b as _,c as V,I as E,d as w,M as j,e as D,f as Y,g as K,h as W,Z,i as M,D as $,P as k,L as N,u as Q,j as F,k as U,l as X}from"./vendor.8bcbfaab.js";const J=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function e(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=e(t);fetch(t.href,o)}};J();window.$=h;window.jQuery=h;var v=0,ee=new T({fill:new g({color:"rgba(255, 255, 255, 0.2)"}),stroke:new L({color:"#C800FF",width:2}),image:new I({radius:7,fill:new g({color:"#C800FF"})})}),S=new R({center:P([13.199195,55.70331],"EPSG:4326","EPSG:3857"),zoom:13});class te extends M{constructor(n){const e=n||{},a=document.createElement("button");a.innerHTML="M";var t=e.buttonTipLabel?e.buttonTipLabel:"Open Measuring Tool";a.title=t;const o=document.createElement("div");o.className="measure ol-unselectable ol-control",o.appendChild(a);super({element:o,target:e.target});a.addEventListener("click",this.enableMeasuring.bind(this),!1)}enableMeasuring(){v==0?(alert("Measuring Tool Enabled"),v=1,l.on("pointermove",O),ue(),l.getViewport().addEventListener("mouseout",B)):(alert("measuring tool disabled"),v=0,l.un("pointermove",O),l.removeInteraction(m),l.getViewport().removeEventListener("mouseout",B),l.removeOverlay(y))}}class ne extends M{constructor(n){const e=n||{},a=document.createElement("button");a.innerHTML="C";var t=e.buttonTipLabel?e.buttonTipLabel:"Clear Map";a.title=t;const o=document.createElement("div");o.className="clear ol-unselectable ol-control",o.appendChild(a);super({element:o,target:e.target});a.addEventListener("click",this.clearAll.bind(this),!1)}clearAll(){location.reload()}}function B(){s.classList.add("hidden")}const re=new q({source:new H}),C=new _,oe=new V({source:C,style:ee});var z={},b=1;z["v"+b]=oe;let f,s,y,c,p;const ae="Click to continue drawing the polygon",le="Click to continue drawing the line",O=function(r){if(r.dragging)return;let n="Click to start drawing";if(f){const e=f.getGeometry();e instanceof k?n=ae:e instanceof N&&(n=le)}s.innerHTML=n,y.setPosition(r.coordinate),s.classList.remove("hidden")};var x=new E({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data",TILED:!0},serverType:"geoserver"}),ie=new w({source:x}),u={},i=1;u["salvazin"+i]=ie;const l=new j({controls:D().extend([new Y({units:"metric",bar:!0,steps:4,text:!1,minWidth:140}),new K({coordinateFormat:W(4),projection:"EPSG:4326",target:document.getElementById("mouse-position")}),new Z({extent:P([13.199195,13.199195,55.70331,55.70331],"EPSG:4326","EPSG:3857")}),new te,new ne]),layers:[re,z["v"+b],u["salvazin"+i]],target:"map",view:S}),A=document.getElementById("type");let m;const se=function(r){const n=U(r);let e;return n>100?e=Math.round(n/1e3*100)/100+" km":e=Math.round(n*100)/100+" m",e},ce=function(r){const n=X(r);let e;return n>1e4?e=Math.round(n/1e6*100)/100+" km<sup>2</sup>":e=Math.round(n*100)/100+" m<sup>2</sup>",e};function ue(){const r=A.value=="area"?"Polygon":"LineString";m=new $({source:C,type:r,style:new T({fill:new g({color:"rgba(255, 255, 255, 0.2)"}),stroke:new L({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new I({radius:5,stroke:new L({color:"rgba(0, 0, 0, 0.7)"}),fill:new g({color:"rgba(255, 255, 255, 0.2)"})})})}),l.addInteraction(m),G(),de();let n;m.on("drawstart",function(e){f=e.feature;let a=e.coordinate;n=f.getGeometry().on("change",function(t){const o=t.target;let d;o instanceof k?(d=ce(o),a=o.getInteriorPoint().getCoordinates()):o instanceof N&&(d=se(o),a=o.getLastCoordinate()),c.innerHTML=d,p.setPosition(a)})}),m.on("drawend",function(){c.className="ol-tooltip ol-tooltip-static",p.setOffset([0,-7]),f=null,c=null,G(),Q(n)})}function de(){s&&s.parentNode.removeChild(s),s=document.createElement("div"),s.className="ol-tooltip hidden",y=new F({element:s,offset:[15,0],positioning:"center-left"}),l.addOverlay(y)}function G(){c&&c.parentNode.removeChild(c),c=document.createElement("div"),c.className="ol-tooltip ol-tooltip-measure v"+b,p=new F({element:c,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),l.addOverlay(p)}function me(){l.removeInteraction(m)}A.addEventListener("change",me);l.on("singleclick",function(r){if(v==0){var n=S.getResolution(),e=x.getFeatureInfoUrl(r.coordinate,n,"EPSG:3857",{INFO_FORMAT:"application/json"});h.get(e,function(a){var t=a.features;if(t.length>0){var o=t[0].properties;fe(o)}})}});function fe(r){var n=document.getElementById("infoContent"),e="",a="";for(var t in r)!r.hasOwnProperty(t)||(t=="rent"?a+="<li><b>"+t+"</b>: SEK "+Math.round(r[t])+"</li>":t=="rank"?a+="<li><b>"+t+"</b>: "+r[t].toFixed(4)+"</li>":t!="bbox"&&(a+="<li><b>"+t+"</b>: "+r[t]+"</li>"));e="<ul>"+a+"</ul>",n.innerHTML=e}function ge(){var r=document.getElementById("infoToggle"),n=r.checked,e="";n?e="block":e="none",document.getElementById("info").style.display=e}function ve(){var r=document.getElementById("filtersToggle"),n=r.checked,e="";n?e="block":e="none",document.getElementById("filters").style.display=e}function ye(){l.removeLayer(u["salvazin"+i]);var r="";document.filtersForm.rentMax.value!=""&&(r+="<PropertyIsLessThan><PropertyName>rent</PropertyName><Literal>"+document.filtersForm.rentMax.value+"</Literal></PropertyIsLessThan>"),document.filtersForm.rentMin.value!=""&&(r+="<PropertyIsGreaterThan><PropertyName>rent</PropertyName><Literal>"+document.filtersForm.rentMin.value+"</Literal></PropertyIsGreaterThan>"),document.filtersForm.userRank.value!=""&&(r+="<PropertyIsLessThan><PropertyName>rank</PropertyName><Literal>"+document.filtersForm.userRank.value+"</Literal></PropertyIsLessThan>");var n=document.getElementById("trailer").checked,e=document.getElementById("house").checked,a=document.getElementById("apartment").checked;n||(r+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>trailer</Literal></PropertyIsNotEqualTo>"),e||(r+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>house</Literal></PropertyIsNotEqualTo>"),a||(r+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>apartment</Literal></PropertyIsNotEqualTo>");var t=new E({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data",FILTER:"(<Filter><And>"+r+"</And></Filter>)()"},serverType:"geoserver"}),o=new w({source:t});i+=1,u["salvazin"+i]=o,l.addLayer(u["salvazin"+i])}function pe(){document.getElementById("trailer").checked=!0,document.getElementById("house").checked=!0,document.getElementById("apartment").checked=!0,document.filtersForm.rentMax.value="",document.filtersForm.rentMin.value="",document.filtersForm.userRank.value="",l.removeLayer(u["salvazin"+i]);var r=new E({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data"},serverType:"geoserver"}),n=new w({source:r});i+=1,u["salvazin"+i]=n,l.addLayer(u["salvazin"+i])}document.getElementById("infoToggle").addEventListener("click",ge);document.getElementById("filtersToggle").addEventListener("click",ve);document.getElementById("clear").addEventListener("click",pe);document.getElementById("filtersForm").addEventListener("change",ye);
//# sourceMappingURL=index.0f779e88.js.map
