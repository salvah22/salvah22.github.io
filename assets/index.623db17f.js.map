{"version":3,"file":"index.623db17f.js","sources":["../../vite/modulepreload-polyfill","../../main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","/*\n * TODO:\n * 1. create a clear polygons button\n * 2. integrate the properties clicks, round values, int(rent).\n */\n\nimport \"ol/ol.css\";\nimport Draw from \"ol/interaction/Draw\";\nimport Map from \"ol/Map\";\nimport Overlay from \"ol/Overlay\";\nimport View from \"ol/View\";\nimport {Circle as CircleStyle, Fill, Stroke, Style} from \"ol/style\";\nimport {LineString, Polygon} from \"ol/geom\";\nimport {OSM, Vector as VectorSource, ImageWMS} from \"ol/source\";\nimport {Tile as TileLayer, Vector as VectorLayer, Image} from \"ol/layer\";\nimport {getArea, getLength} from \"ol/sphere\";\nimport {unByKey} from \"ol/Observable\";\nimport {Control, defaults, ScaleLine, MousePosition, ZoomToExtent} from \"ol/control\";\n// import * as olCoordinate from \"ol/coordinate\";\nimport {createStringXY} from \"ol/coordinate\";\nimport {transform} from \"ol/proj\";\n\nimport $ from 'jquery';\n// export for others scripts to use\nwindow.$ = $;\nwindow.jQuery = $;\n\nvar measuring = 0;\n\nvar style1 = new Style({fill: new Fill({\n                            color: \"rgba(255, 255, 255, 0.2)\",\n                        }),\n                        stroke: new Stroke({\n                            color: \"#C800FF\",\n                            width: 2,\n                        }),\n                        image: new CircleStyle({\n                            radius: 7,\n                            fill: new Fill({\n                                color: \"#C800FF\",\n                            }),\n                        }),\n});\n\nvar view1 = new View({center: transform([13.199195, 55.70331], \"EPSG:4326\", \"EPSG:3857\"), zoom: 13});\n\nclass measureButton extends Control {\n    /**\n    * Docs:\n    * @param {Object} [opt_options] Control options.\n    */\n    constructor(opt_options) {\n        const options = opt_options || {};\n\n        const button = document.createElement(\"button\");\n        button.innerHTML = \"M\";\n        var buttonTipLabel = options.buttonTipLabel ? options.buttonTipLabel : \"Open Measuring Tool\";\n        button.title = buttonTipLabel;\n        const element = document.createElement(\"div\");\n        element.className = \"measure ol-unselectable ol-control\";\n        element.appendChild(button);\n\n        super({\n            element: element,\n            target: options.target,\n        });\n\n        button.addEventListener(\"click\", this.enableMeasuring.bind(this), false);\n    }\n\n    enableMeasuring() {\n        if (measuring == 0) {\n            alert(\"Measuring Tool Enabled\");\n            measuring = 1;\n            map.on(\"pointermove\", pointerMoveHandler);\n            addInteraction();\n            map.getViewport().addEventListener(\"mouseout\", hideMeasureTooptip);\n\n\n        } else {\n            alert(\"measuring tool disabled\");\n            measuring = 0;\n            map.un(\"pointermove\", pointerMoveHandler);\n            map.removeInteraction(draw);\n            map.getViewport().removeEventListener(\"mouseout\", hideMeasureTooptip);\n            map.removeOverlay(helpTooltip);\n        }\n    }\n};\n\n\nclass clearButton extends Control {\n    /**\n    * @param {Object} [opt_options] Control options.\n    */\n    constructor(opt_options) {\n        const options = opt_options || {};\n\n        const button = document.createElement(\"button\");\n        button.innerHTML = \"C\";\n        var buttonTipLabel = options.buttonTipLabel ? options.buttonTipLabel : \"Clear Map\";\n        button.title = buttonTipLabel;\n        const element = document.createElement(\"div\");\n        element.className = \"clear ol-unselectable ol-control\";\n        element.appendChild(button);\n\n        super({\n            element: element,\n            target: options.target,\n        });\n\n        button.addEventListener(\"click\", this.clearAll.bind(this), false);\n    }\n\n    clearAll() {\n        location.reload();\n    }\n};\n\n\nclass moreButton extends Control {\n    /**\n    * @param {Object} [opt_options] Control options.\n    */\n    constructor(opt_options) {\n        const options = opt_options || {};\n\n        const button = document.createElement(\"button\");\n        button.innerHTML = \"i\";\n        var buttonTipLabel = options.buttonTipLabel ? options.buttonTipLabel : \"More Information\";\n        button.title = buttonTipLabel;\n        const element = document.createElement(\"div\");\n        element.className = \"more ol-unselectable ol-control\";\n        element.appendChild(button);\n\n        super({\n            element: element,\n            target: options.target,\n        });\n\n        button.addEventListener(\"click\", this.showMore.bind(this), false);\n    }\n\n    showMore() {\n        document.getElementById(\"moreinfo\").style.display = \"block\";\n    }\n};\n\nfunction hideMeasureTooptip(){\n    helpTooltipElement.classList.add(\"hidden\");\n}\n\n\nconst raster = new TileLayer({\n  source: new OSM(),\n});\n\nconst source = new VectorSource();\n\nconst vector = new VectorLayer({\n  source: source,\n  style: style1\n});\n\nvar vectors = {};\nvar vectorCount = 1;\nvectors[\"v\" + vectorCount] = vector;\n\n/**\n * Currently drawn feature.\n * @type {import(\"../src/ol/Feature.js\").default}\n */\nlet sketch;\n\n/**\n * The help tooltip element.\n * @type {HTMLElement}\n */\nlet helpTooltipElement;\n\n/**\n * Overlay to show the help messages.\n * @type {Overlay}\n */\nlet helpTooltip;\n\n/**\n * The measure tooltip element.\n * @type {HTMLElement}\n */\nlet measureTooltipElement;\n\n/**\n * Overlay to show the measurement.\n * @type {Overlay}\n */\nlet measureTooltip;\n\n/**\n * Message to show when the user is drawing a polygon.\n * @type {string}\n */\nconst continuePolygonMsg = \"Click to continue drawing the polygon\";\n\n/**\n * Message to show when the user is drawing a line.\n * @type {string}\n */\nconst continueLineMsg = \"Click to continue drawing the line\";\n\n/**\n * Handle pointer move.\n * @param {import(\"../src/ol/MapBrowserEvent\").default} evt The event.\n */\nconst pointerMoveHandler = function (evt) {\n  if (evt.dragging) {\n    return;\n  }\n  /** @type {string} */\n  let helpMsg = \"Click to start drawing\";\n\n  if (sketch) {\n    const geom = sketch.getGeometry();\n    if (geom instanceof Polygon) {\n      helpMsg = continuePolygonMsg;\n    } else if (geom instanceof LineString) {\n      helpMsg = continueLineMsg;\n    }\n  }\n\n  helpTooltipElement.innerHTML = helpMsg;\n  helpTooltip.setPosition(evt.coordinate);\n\n  helpTooltipElement.classList.remove(\"hidden\");\n};\n\n\n/* ----- map definition ------- */\n\nvar housingLayer = new ImageWMS({\n    url: \"https://geoserver.gis.lu.se/geoserver/wms\",\n    params: {\n    \"LAYERS\": \"salvazin_dummy_data\", // ,salvazin_landmarks\n    \"TILED\": true\n    },\n    serverType: \"geoserver\"\n});\n\nvar salvazin = new Image({source: housingLayer});\n\nvar layers = {};\nvar layersCount = 1;\nlayers[\"salvazin\" + layersCount] = salvazin;\n\n/* --- Defining current housing selection layer --- */\n\nvar selection = {};\nvar selectionCount = 1;\n\nfunction updateSelection(name = \"none\"){\n    var selectionLayer = new ImageWMS({\n            url: \"https://geoserver.gis.lu.se/geoserver/wms\",\n            params: {\n            \"LAYERS\": \"salvazin_dummy_data\", // ,salvazin_landmarks\n            \"TILED\": true,\n            \"FILTER\": \"(<Filter><And><PropertyIsEqualTo><PropertyName>name</PropertyName><Literal>\" + name + \"</Literal></PropertyIsEqualTo></And></Filter>)\",\n            \"STYLES\": \"salvazin_selection\"\n            },\n            serverType: \"geoserver\"\n    });\n\n    var select = new Image({source: selectionLayer});\n    map.removeLayer(selection[\"selection\" + selectionCount]);\n    selectionCount += 1;\n    selection[\"selection\" + selectionCount] = select;\n    map.addLayer(selection[\"selection\" + selectionCount]);\n};\n\n//OpenStreetMap background + layers handling\n\nconst map = new Map({\n  controls: defaults().extend([ // {attributionOptions:({collapsible: false})}\n\n        //Control for displaying a scale line\n        new ScaleLine({\n            units: \"metric\",\n            bar: true,\n            steps: 4,\n            text: false,\n            minWidth: 140,\n        }),\n\n        //Extra functionality of the map\n        //Control for displaying coordinates\n        new MousePosition({\n            coordinateFormat: createStringXY(4),\n            projection: \"EPSG:4326\",\n            target: document.getElementById(\"mouse-position\")\n        }),\n        /*\n        new ZoomToExtent({\n            extent: transform([13.199195,13.199195, 55.70331,55.70331], \"EPSG:4326\", \"EPSG:3857\")\n        }),\n        */\n        new measureButton(),\n        new clearButton(),\n        new moreButton()\n\n    ]),\n  layers: [raster, vectors[\"v\" + vectorCount], layers[\"salvazin\" + layersCount]],\n  target: \"map\",\n  view: view1\n});\n\nupdateSelection();\n\nconst typeSelect = document.getElementById(\"type\");\n\nlet draw; // global so we can remove it later\n\n/**\n * Format length output.\n * @param {LineString} line The line.\n * @return {string} The formatted length.\n */\nconst formatLength = function (line) {\n  const length = getLength(line);\n  let output;\n  if (length > 100) {\n    output = Math.round((length / 1000) * 100) / 100 + \" \" + \"km\";\n  } else {\n    output = Math.round(length * 100) / 100 + \" \" + \"m\";\n  }\n  return output;\n};\n\n/**\n * Format area output.\n * @param {Polygon} polygon The polygon.\n * @return {string} Formatted area.\n */\nconst formatArea = function (polygon) {\n  const area = getArea(polygon);\n  let output;\n  if (area > 10000) {\n    output = Math.round((area / 1000000) * 100) / 100 + \" \" + \"km<sup>2</sup>\";\n  } else {\n    output = Math.round(area * 100) / 100 + \" \" + \"m<sup>2</sup>\";\n  }\n  return output;\n};\n\nfunction addInteraction() {\n  const type = typeSelect.value == \"area\" ? \"Polygon\" : \"LineString\";\n  draw = new Draw({\n    source: source,\n    type: type,\n    style: new Style({\n      fill: new Fill({\n        color: \"rgba(255, 255, 255, 0.2)\",\n      }),\n      stroke: new Stroke({\n        color: \"rgba(0, 0, 0, 0.5)\",\n        lineDash: [10, 10],\n        width: 2,\n      }),\n      image: new CircleStyle({\n        radius: 5,\n        stroke: new Stroke({\n          color: \"rgba(0, 0, 0, 0.7)\",\n        }),\n        fill: new Fill({\n          color: \"rgba(255, 255, 255, 0.2)\",\n        }),\n      }),\n    }),\n  });\n  map.addInteraction(draw);\n\n  createMeasureTooltip();\n  createHelpTooltip();\n\n  let listener;\n  draw.on(\"drawstart\", function (evt) {\n    // set sketch\n    sketch = evt.feature;\n\n    /** @type {import(\"../src/ol/coordinate.js\").Coordinate|undefined} */\n    let tooltipCoord = evt.coordinate;\n\n    listener = sketch.getGeometry().on(\"change\", function (evt) {\n      const geom = evt.target;\n      let output;\n      if (geom instanceof Polygon) {\n        output = formatArea(geom);\n        tooltipCoord = geom.getInteriorPoint().getCoordinates();\n      } else if (geom instanceof LineString) {\n        output = formatLength(geom);\n        tooltipCoord = geom.getLastCoordinate();\n      }\n      measureTooltipElement.innerHTML = output;\n      measureTooltip.setPosition(tooltipCoord);\n    });\n  });\n\n  draw.on(\"drawend\", function () {\n    measureTooltipElement.className = \"ol-tooltip ol-tooltip-static\";\n    measureTooltip.setOffset([0, -7]);\n    // unset sketch\n    sketch = null;\n    // unset tooltip so that a new one can be created\n    measureTooltipElement = null;\n    createMeasureTooltip();\n    unByKey(listener);\n  });\n}\n\n// Creates a new help tooltip\n\nfunction createHelpTooltip() {\n  if (helpTooltipElement) {\n    helpTooltipElement.parentNode.removeChild(helpTooltipElement);\n  }\n  helpTooltipElement = document.createElement(\"div\");\n  helpTooltipElement.className = \"ol-tooltip hidden\";\n  helpTooltip = new Overlay({\n    element: helpTooltipElement,\n    offset: [15, 0],\n    positioning: \"center-left\",\n  });\n  map.addOverlay(helpTooltip);\n}\n\n// Creates a new measure tooltip\n\nfunction createMeasureTooltip() {\n  if (measureTooltipElement) {\n    measureTooltipElement.parentNode.removeChild(measureTooltipElement);\n  }\n  measureTooltipElement = document.createElement(\"div\");\n  measureTooltipElement.className = \"ol-tooltip ol-tooltip-measure v\"+vectorCount;\n  measureTooltip = new Overlay({\n    element: measureTooltipElement,\n    offset: [0, -15],\n    positioning: \"bottom-center\",\n    stopEvent: false,\n    insertFirst: false,\n  });\n  map.addOverlay(measureTooltip);\n};\n\n\n// Let user change the geometry type:\n\nfunction changeMeasureType() {\n    map.removeInteraction(draw);\n}\n\n/* ---- housing filtering ----- */\n\nmap.on(\"singleclick\", function (evt) {\n    if (measuring == 0){\n        var viewResolution = /** @type {number} */ (view1.getResolution());\n        var url = housingLayer.getFeatureInfoUrl(\n            evt.coordinate,\n            viewResolution,\n            \"EPSG:3857\",\n            { \"INFO_FORMAT\": \"application/json\" });\n        // JQuery HTTP GET request\n        $.get(url, function (resp) {\n            var features = resp.features;\n            if (features.length > 0) {\n                var properties = features[0].properties;\n                fillInfoPanel(properties);\n            }\n        });\n    }\n});\n\n\nfunction fillInfoPanel(props) {\n    var infoPanel = document.getElementById(\"infoContent\");\n    var content = \"\";\n    var content2 = \"\";\n    var rent = \"\";\n    for (var prop in props) {\n        // skip loop if the property is from prototype\n        if (!props.hasOwnProperty(prop)) continue;\n        if (prop == \"name\") {\n            updateSelection(props[prop]);\n            content += \"<h1>\" + props[prop] + \"</h1>\";\n        };\n        if (prop == \"type\") {\n            content += \"<span>\" + props[prop] + \", <b>SEK \" + rent + \"</b></span><p><img src='img/\" + props[prop] + \".png' width='216'></p><p><i>\";\n\n        };\n        if (prop == \"rent\"){\n            rent = Math.round(props[prop])\n        };\n        if (prop == \"rank\") {\n            content2 +=  prop + \": \" + props[prop].toFixed(4) +\"</i></p>\";\n        };\n        if (prop == \"bbox\"){\n            var a = props[prop];\n            var x = a[0];\n            var y = a[1];\n        }\n    }\n    infoPanel.innerHTML = content + content2;\n    setVView(x, y, 0);\n};\n\n\nfunction toggleInfo() {\n    var checkBox = document.getElementById(\"infoToggle\");\n    var checked = checkBox.checked;\n    var display = \"\"\n    if (checked) {\n        display = \"block\"\n    } else {\n        display = \"none\"\n    }\n    document.getElementById(\"info\").style.display = display\n};\nfunction toggleFilters() {\n    var checkBox = document.getElementById(\"filtersToggle\");\n    var checked = checkBox.checked;\n    var display = \"\"\n    if (checked) {\n        display = \"block\"\n    } else {\n        display = \"none\"\n    }\n    document.getElementById(\"filters\").style.display = display\n};\n\n// Filters handling\n// docs: https://docs.geoserver.org/stable/en/user/styling/sld/reference/filters.html\n\nfunction updateMap() {\n    map.removeLayer(layers[\"salvazin\" + layersCount]);\n\n    var filters = \"\";\n    if (document.filtersForm.rentMax.value != \"\") {\n        filters += \"<PropertyIsLessThan><PropertyName>rent</PropertyName><Literal>\" + document.filtersForm.rentMax.value + \"</Literal></PropertyIsLessThan>\"\n    };\n\n    if (document.filtersForm.rentMin.value != \"\") {\n        filters += \"<PropertyIsGreaterThan><PropertyName>rent</PropertyName><Literal>\" + document.filtersForm.rentMin.value + \"</Literal></PropertyIsGreaterThan>\"\n    };\n\n    if (document.filtersForm.userRank.value != \"\") {\n        filters += \"<PropertyIsLessThan><PropertyName>rank</PropertyName><Literal>\" + document.filtersForm.userRank.value + \"</Literal></PropertyIsLessThan>\"\n    };\n\n    var trailer = document.getElementById(\"trailer\").checked;\n    var house = document.getElementById(\"house\").checked;\n    var apartment = document.getElementById(\"apartment\").checked;\n\n    if(!trailer){\n        filters += \"<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>trailer</Literal></PropertyIsNotEqualTo>\"\n    }\n    if(!house){\n        filters += \"<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>house</Literal></PropertyIsNotEqualTo>\"\n    }\n    if(!apartment){\n        filters += \"<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>apartment</Literal></PropertyIsNotEqualTo>\"\n    }\n\n    var housingLayer = new ImageWMS({\n        url: \"https://geoserver.gis.lu.se/geoserver/wms\",\n        params: {\n        \"LAYERS\": \"salvazin_dummy_data\", // ,salvazin_landmarks\n        \"FILTER\": \"(<Filter><And>\" + filters + \"</And></Filter>)()\"\n        },\n        serverType: \"geoserver\"\n    });\n\n    var salvazin = new Image({source: housingLayer});\n    layersCount += 1;\n    layers[\"salvazin\" + layersCount] = salvazin;\n    map.addLayer(layers[\"salvazin\" + layersCount]);\n\n    updateSelection(document.getElementById(\"infoContent\").innerHTML.split(\"h1\")[1].slice(1).split(\"<\")[0]);\n};\n\nfunction clearFilters() {\n    document.getElementById(\"trailer\").checked = true;\n    document.getElementById(\"house\").checked = true;\n    document.getElementById(\"apartment\").checked = true;\n    document.filtersForm.rentMax.value = \"\";\n    document.filtersForm.rentMin.value = \"\";\n    document.filtersForm.userRank.value = \"\";\n\n    map.removeLayer(layers[\"salvazin\" + layersCount]);\n\n    var housingLayer = new ImageWMS({\n        url: \"https://geoserver.gis.lu.se/geoserver/wms\",\n        params: {\n        \"LAYERS\": \"salvazin_dummy_data\" // ,salvazin_landmarks\n        },\n        serverType: \"geoserver\"\n    });\n\n    var salvazin = new Image({source: housingLayer});\n    layersCount += 1;\n    layers[\"salvazin\" + layersCount] = salvazin;\n    map.addLayer(layers[\"salvazin\" + layersCount]);\n\n};\n\n\nfunction navClick(){\n    // scroll up when nav is clicked and hide all contents\n    document.getElementById(\"moreinfo\").style.display = \"none\";\n};\n\nfunction setVView(x=13.199195, y=55.70331, t=1){\n    if (t == 1){\n        var view2 = new View({center: transform([x, y], \"EPSG:4326\", \"EPSG:3857\"), zoom: 14});\n    } else if (t == 0) {\n        var view2 = new View({center: [x, y], zoom: 14});\n    }\n\n    map.setView(view2);\n}\n\n\ntypeSelect.addEventListener(\"change\", changeMeasureType);\ndocument.getElementById(\"nav\").addEventListener(\"click\", navClick);\ndocument.getElementById(\"infoToggle\").addEventListener(\"click\", toggleInfo);\ndocument.getElementById(\"filtersToggle\").addEventListener(\"click\", toggleFilters);\ndocument.getElementById(\"clear\").addEventListener(\"click\", clearFilters);\ndocument.getElementById(\"filtersForm\").addEventListener(\"change\", updateMap);\n"],"names":[],"mappings":"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"}