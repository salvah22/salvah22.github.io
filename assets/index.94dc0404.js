import{$ as w,S as F,F as y,a as T,C as S,V as I,t as B,T as j,O as K,b as U,c as W,I as v,d as f,M as $,e as Q,f as X,g as J,h as Z,i as b,D as ee,P as C,L as z,u as te,j as A,k as ne,l as re}from"./vendor.df98d922.js";const oe=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}};oe();window.$=w;window.jQuery=w;var p=0,ae=new F({fill:new y({color:"rgba(255, 255, 255, 0.2)"}),stroke:new T({color:"#C800FF",width:2}),image:new S({radius:7,fill:new y({color:"#C800FF"})})}),O=new I({center:B([13.199195,55.71355],"EPSG:4326","EPSG:3857"),zoom:13});class se extends b{constructor(n){const e=n||{},a=document.createElement("button");a.innerHTML="M";var o=e.buttonTipLabel?e.buttonTipLabel:"Toggle Measuring Tool";a.title=o;const r=document.createElement("div");r.className="measure ol-unselectable ol-control",r.appendChild(a);super({element:r,target:e.target});a.addEventListener("click",this.enableMeasuring.bind(this),!1)}enableMeasuring(){p==0?(alert("Measuring Tool Enabled"),p=1,l.on("pointermove",q),Le(),l.getViewport().addEventListener("mouseout",R)):(alert("measuring tool disabled"),p=0,l.un("pointermove",q),l.removeInteraction(m),l.getViewport().removeEventListener("mouseout",R),l.removeOverlay(L))}}class le extends b{constructor(n){const e=n||{},a=document.createElement("button");a.innerHTML="C";var o=e.buttonTipLabel?e.buttonTipLabel:"Clear Map";a.title=o;const r=document.createElement("div");r.className="clear ol-unselectable ol-control",r.appendChild(a);super({element:r,target:e.target});a.addEventListener("click",this.clearAll.bind(this),!1)}clearAll(){location.reload()}}class ie extends b{constructor(n){const e=n||{},a=document.createElement("button");a.innerHTML="i";var o=e.buttonTipLabel?e.buttonTipLabel:"More Information";a.title=o;const r=document.createElement("div");r.className="more ol-unselectable ol-control",r.appendChild(a);super({element:r,target:e.target});a.addEventListener("click",this.showMore.bind(this),!1)}showMore(){document.getElementById("moreinfo").style.display="block"}}function R(){c.classList.add("hidden")}const ce=new j({source:new K}),x=new U,ue=new W({source:x,style:ae});var G={},P=1;G["v"+P]=ue;let g,c,L,u,h;const de="Click to continue drawing the polygon",me="Click to continue drawing the line",q=function(t){if(t.dragging)return;let n="Click to start drawing";if(g){const e=g.getGeometry();e instanceof C?n=de:e instanceof z&&(n=me)}c.innerHTML=n,L.setPosition(t.coordinate),c.classList.remove("hidden")};var H=new v({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salva_dummy2",TILED:!0},serverType:"geoserver"}),ve=new f({source:H}),d={},i=1;d["salvazin"+i]=ve;var fe=new v({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_lund_landmark",TILED:!0},serverType:"geoserver"}),ge=new f({source:fe}),k={},E=1;function M(t="none"){var n=new v({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salva_dummy2",TILED:!0,FILTER:"(<Filter><And><PropertyIsEqualTo><PropertyName>name</PropertyName><Literal>"+t+"</Literal></PropertyIsEqualTo></And></Filter>)",STYLES:"salvazin_selection"},serverType:"geoserver"}),e=new f({source:n});l.removeLayer(k["selection"+E]),E+=1,k["selection"+E]=e,l.addLayer(k["selection"+E])}const l=new $({controls:Q().extend([new X({units:"metric",bar:!0,steps:4,text:!1,minWidth:140}),new J({coordinateFormat:Z(4),projection:"EPSG:4326",target:document.getElementById("mouse-position")}),new se,new le,new ie]),layers:[ce,G["v"+P],d["salvazin"+i],ge],target:"map",view:O});M();const V=document.getElementById("type");let m;const ye=function(t){const n=ne(t);let e;return n>100?e=Math.round(n/1e3*100)/100+" km":e=Math.round(n*100)/100+" m",e},pe=function(t){const n=re(t);let e;return n>1e4?e=Math.round(n/1e6*100)/100+" km<sup>2</sup>":e=Math.round(n*100)/100+" m<sup>2</sup>",e};function Le(){const t=V.value=="area"?"Polygon":"LineString";m=new ee({source:x,type:t,style:new F({fill:new y({color:"rgba(255, 255, 255, 0.2)"}),stroke:new T({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new S({radius:5,stroke:new T({color:"rgba(0, 0, 0, 0.7)"}),fill:new y({color:"rgba(255, 255, 255, 0.2)"})})})}),l.addInteraction(m),_(),he();let n;m.on("drawstart",function(e){g=e.feature;let a=e.coordinate;n=g.getGeometry().on("change",function(o){const r=o.target;let s;r instanceof C?(s=pe(r),a=r.getInteriorPoint().getCoordinates()):r instanceof z&&(s=ye(r),a=r.getLastCoordinate()),u.innerHTML=s,h.setPosition(a)})}),m.on("drawend",function(){u.className="ol-tooltip ol-tooltip-static",h.setOffset([0,-7]),g=null,u=null,_(),te(n)})}function he(){c&&c.parentNode.removeChild(c),c=document.createElement("div"),c.className="ol-tooltip hidden",L=new A({element:c,offset:[15,0],positioning:"center-left"}),l.addOverlay(L)}function _(){u&&u.parentNode.removeChild(u),u=document.createElement("div"),u.className="ol-tooltip ol-tooltip-measure v"+P,h=new A({element:u,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),l.addOverlay(h)}function Ee(){l.removeInteraction(m)}l.on("singleclick",function(t){if(p==0){var n=O.getResolution(),e=H.getFeatureInfoUrl(t.coordinate,n,"EPSG:3857",{INFO_FORMAT:"application/json"});w.get(e,function(a){var o=a.features;if(o.length>0){var r=o[0].properties;we(r)}})}});function we(t){var n=document.getElementById("infoContent"),e="",a="",o="",r="";for(var s in t)if(!!t.hasOwnProperty(s)&&(s=="name"&&(M(t[s]),o="<h1>"+t[s]+"</h1>"),s=="type"&&(e+="<span>"+t[s]+", <b>SEK "+r+"</b></span><p><img src='img/"+t[s]+".png' width='216'></p><p><i>"),s=="rent"&&(r=Math.round(t[s])),s=="rank"&&(a+=s+": "+t[s].toFixed(4)+"</i></p>"),s=="address"&&(o+="<p>"+decodeURIComponent(escape(t[s]))+"</p>"),s=="bbox"))var N=t[s],Y=N[0],D=N[1];n.innerHTML=o+e+a,Me(Y,D,0)}function Te(){var t=document.getElementById("infoToggle"),n=t.checked,e="";n?e="block":e="none",document.getElementById("info").style.display=e}function Ie(){var t=document.getElementById("filtersToggle"),n=t.checked,e="";n?e="block":e="none",document.getElementById("filters").style.display=e}function be(){l.removeLayer(d["salvazin"+i]);var t="";document.filtersForm.rentMax.value!=""&&(t+="<PropertyIsLessThan><PropertyName>rent</PropertyName><Literal>"+document.filtersForm.rentMax.value+"</Literal></PropertyIsLessThan>"),document.filtersForm.rentMin.value!=""&&(t+="<PropertyIsGreaterThan><PropertyName>rent</PropertyName><Literal>"+document.filtersForm.rentMin.value+"</Literal></PropertyIsGreaterThan>"),document.filtersForm.userRank.value!=""&&(t+="<PropertyIsLessThan><PropertyName>rank</PropertyName><Literal>"+document.filtersForm.userRank.value+"</Literal></PropertyIsLessThan>");var n=document.getElementById("trailer").checked,e=document.getElementById("house").checked,a=document.getElementById("apartment").checked;n||(t+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>trailer</Literal></PropertyIsNotEqualTo>"),e||(t+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>house</Literal></PropertyIsNotEqualTo>"),a||(t+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>apartment</Literal></PropertyIsNotEqualTo>");var o=new v({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salva_dummy2",FILTER:"(<Filter><And>"+t+"</And></Filter>)()"},serverType:"geoserver"}),r=new f({source:o});i+=1,d["salvazin"+i]=r,l.addLayer(d["salvazin"+i]),M(document.getElementById("infoContent").innerHTML.split("h1")[1].slice(1).split("<")[0])}function Pe(){document.getElementById("trailer").checked=!0,document.getElementById("house").checked=!0,document.getElementById("apartment").checked=!0,document.filtersForm.rentMax.value="",document.filtersForm.rentMin.value="",document.filtersForm.userRank.value="",l.removeLayer(d["salvazin"+i]);var t=new v({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salva_dummy2"},serverType:"geoserver"}),n=new f({source:t});i+=1,d["salvazin"+i]=n,l.addLayer(d["salvazin"+i])}function ke(){document.getElementById("moreinfo").style.display="none"}function Me(t=13.199195,n=55.70331,e=1){if(e==1)var a=new I({center:B([t,n],"EPSG:4326","EPSG:3857"),zoom:14});else if(e==0)var a=new I({center:[t,n],zoom:14});l.setView(a)}V.addEventListener("change",Ee);document.getElementById("nav").addEventListener("click",ke);document.getElementById("infoToggle").addEventListener("click",Te);document.getElementById("filtersToggle").addEventListener("click",Ie);document.getElementById("clear").addEventListener("click",Pe);document.getElementById("filtersForm").addEventListener("change",be);
//# sourceMappingURL=index.94dc0404.js.map
