import{S as T,F as p,a as h,C as I,V as G,t as P,T as R,O as q,b as H,c as _,I as L,d as E,M as V,e as j,f as D,g as Y,h as K,Z as W,i as b,D as Z,P as M,L as k,u as U,j as N,k as X,l as J}from"./vendor.89f8d57a.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}};Q();var g=0,ee=new T({fill:new p({color:"rgba(255, 255, 255, 0.2)"}),stroke:new h({color:"#C800FF",width:2}),image:new I({radius:7,fill:new p({color:"#C800FF"})})}),F=new G({center:P([13.199195,55.70331],"EPSG:4326","EPSG:3857"),zoom:13});class te extends b{constructor(t){const e=t||{},a=document.createElement("button");a.innerHTML="M";var r=e.buttonTipLabel?e.buttonTipLabel:"Open Measuring Tool";a.title=r;const o=document.createElement("div");o.className="measure ol-unselectable ol-control",o.appendChild(a);super({element:o,target:e.target});a.addEventListener("click",this.enableMeasuring.bind(this),!1)}enableMeasuring(){g==0?(alert("Measuring Tool Enabled"),g=1,l.on("pointermove",z),ue(),l.getViewport().addEventListener("mouseout",B)):(alert("measuring tool disabled"),g=0,l.un("pointermove",z),l.removeInteraction(m),l.getViewport().removeEventListener("mouseout",B),l.removeOverlay(v))}}class ne extends b{constructor(t){const e=t||{},a=document.createElement("button");a.innerHTML="C";var r=e.buttonTipLabel?e.buttonTipLabel:"Clear Map";a.title=r;const o=document.createElement("div");o.className="clear ol-unselectable ol-control",o.appendChild(a);super({element:o,target:e.target});a.addEventListener("click",this.clearAll.bind(this),!1)}clearAll(){location.reload()}}function B(){i.classList.add("hidden")}const re=new R({source:new q}),S=new H,oe=new _({source:S,style:ee});var C={},w=1;C["v"+w]=oe;let f,i,v,c,y;const ae="Click to continue drawing the polygon",le="Click to continue drawing the line",z=function(n){if(n.dragging)return;let t="Click to start drawing";if(f){const e=f.getGeometry();e instanceof M?t=ae:e instanceof k&&(t=le)}i.innerHTML=t,v.setPosition(n.coordinate),i.classList.remove("hidden")};var O=new L({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data",TILED:!0},serverType:"geoserver"}),se=new E({source:O}),u={},s=1;u["salvazin"+s]=se;const l=new V({controls:j().extend([new D({units:"metric",bar:!0,steps:4,text:!1,minWidth:140}),new Y({coordinateFormat:K(4),projection:"EPSG:4326",target:document.getElementById("mouse-position")}),new W({extent:P([13.199195,13.199195,55.70331,55.70331],"EPSG:4326","EPSG:3857")}),new te,new ne]),layers:[re,C["v"+w],u["salvazin"+s]],target:"map",view:F}),x=document.getElementById("type");let m;const ie=function(n){const t=X(n);let e;return t>100?e=Math.round(t/1e3*100)/100+" km":e=Math.round(t*100)/100+" m",e},ce=function(n){const t=J(n);let e;return t>1e4?e=Math.round(t/1e6*100)/100+" km<sup>2</sup>":e=Math.round(t*100)/100+" m<sup>2</sup>",e};function ue(){const n=x.value=="area"?"Polygon":"LineString";m=new Z({source:S,type:n,style:new T({fill:new p({color:"rgba(255, 255, 255, 0.2)"}),stroke:new h({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new I({radius:5,stroke:new h({color:"rgba(0, 0, 0, 0.7)"}),fill:new p({color:"rgba(255, 255, 255, 0.2)"})})})}),l.addInteraction(m),A(),de();let t;m.on("drawstart",function(e){f=e.feature;let a=e.coordinate;t=f.getGeometry().on("change",function(r){const o=r.target;let d;o instanceof M?(d=ce(o),a=o.getInteriorPoint().getCoordinates()):o instanceof k&&(d=ie(o),a=o.getLastCoordinate()),c.innerHTML=d,y.setPosition(a)})}),m.on("drawend",function(){c.className="ol-tooltip ol-tooltip-static",y.setOffset([0,-7]),f=null,c=null,A(),U(t)})}function de(){i&&i.parentNode.removeChild(i),i=document.createElement("div"),i.className="ol-tooltip hidden",v=new N({element:i,offset:[15,0],positioning:"center-left"}),l.addOverlay(v)}function A(){c&&c.parentNode.removeChild(c),c=document.createElement("div"),c.className="ol-tooltip ol-tooltip-measure v"+w,y=new N({element:c,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),l.addOverlay(y)}function me(){l.removeInteraction(m)}x.addEventListener("change",me);l.on("singleclick",function(n){if(g==0){var t=F.getResolution(),e=O.getFeatureInfoUrl(n.coordinate,t,"EPSG:3857",{INFO_FORMAT:"application/json"});$.get(e,function(a){var r=a.features;if(r.length>0){var o=r[0].properties;fe(o)}})}});function fe(n){var t=document.getElementById("infoContent"),e="",a="";for(var r in n)!n.hasOwnProperty(r)||r!="bbox"&&(a+="<li><b>"+r+"</b>: "+n[r]+"</li>");e="<ul>"+a+"</ul>",t.innerHTML=e}function pe(){var n=document.getElementById("infoToggle"),t=n.checked,e="";t?e="block":e="none",document.getElementById("info").style.display=e}function ge(){var n=document.getElementById("filtersToggle"),t=n.checked,e="";t?e="block":e="none",document.getElementById("filters").style.display=e}function ve(){l.removeLayer(u["salvazin"+s]);var n="";document.filtersForm.rentMax.value!=""&&(n+="<PropertyIsLessThan><PropertyName>rent</PropertyName><Literal>"+document.filtersForm.rentMax.value+"</Literal></PropertyIsLessThan>"),document.filtersForm.rentMin.value!=""&&(n+="<PropertyIsGreaterThan><PropertyName>rent</PropertyName><Literal>"+document.filtersForm.rentMin.value+"</Literal></PropertyIsGreaterThan>"),document.filtersForm.userRank.value!=""&&(n+="<PropertyIsLessThan><PropertyName>rank</PropertyName><Literal>"+document.filtersForm.userRank.value+"</Literal></PropertyIsLessThan>");var t=document.getElementById("trailer").checked,e=document.getElementById("house").checked,a=document.getElementById("apartment").checked;t||(n+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>trailer</Literal></PropertyIsNotEqualTo>"),e||(n+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>house</Literal></PropertyIsNotEqualTo>"),a||(n+="<PropertyIsNotEqualTo><PropertyName>type</PropertyName><Literal>apartment</Literal></PropertyIsNotEqualTo>");var r=new L({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data",FILTER:"(<Filter><And>"+n+"</And></Filter>)()"},serverType:"geoserver"}),o=new E({source:r});s+=1,u["salvazin"+s]=o,l.addLayer(u["salvazin"+s])}function ye(){document.getElementById("trailer").checked=!0,document.getElementById("house").checked=!0,document.getElementById("apartment").checked=!0,document.filtersForm.rentMax.value="",document.filtersForm.rentMin.value="",document.filtersForm.userRank.value="",l.removeLayer(u["salvazin"+s]);var n=new L({url:"https://geoserver.gis.lu.se/geoserver/wms",params:{LAYERS:"salvazin_dummy_data"},serverType:"geoserver"}),t=new E({source:n});s+=1,u["salvazin"+s]=t,l.addLayer(u["salvazin"+s])}document.getElementById("infoToggle").addEventListener("click",pe);document.getElementById("filtersToggle").addEventListener("click",ge);document.getElementById("clear").addEventListener("click",ye);document.getElementById("filtersForm").addEventListener("change",ve);
//# sourceMappingURL=index.97ab2280.js.map
